jQuery(document).ready(function(a){var b=a("#helptain-action-bar");b.on("click","li.helptain-action-button a",function(b){b.preventDefault();var c=a(this).data("action"),d=a("#kbs-ticket-reply-wrap"),e=a("#kbs-ticket-add-note-container"),f=a("#helptain_status_select"),g=a("#helptain_agent_select"),h=a(this).parents("#helptain-action-bar").find("li.helptain-action-button a").not(a(this));switch(a(this).toggleClass("active"),h.removeClass("active"),c){case"show_reply_editor":d.toggleClass("kbs-hidden"),e.addClass("kbs-hidden"),f.addClass("kbs-hidden"),g.addClass("kbs-hidden"),a("html,body").animate({scrollTop:d.offset().top-80},600);break;case"show_note_editor":e.toggleClass("kbs-hidden"),d.addClass("kbs-hidden"),f.addClass("kbs-hidden"),g.addClass("kbs-hidden"),a("html,body").animate({scrollTop:e.offset().top-80},600);break;case"set_status":f.toggleClass("kbs-hidden"),g.addClass("kbs-hidden");break;case"assign_ticket":g.toggleClass("kbs-hidden"),f.addClass("kbs-hidden");break;default:jQuery(document).trigger("helptain_action_bar_action_"+c,a(this))}}),b.on("click","li.helptain-action-button a, li.helptain-action-button li, .helptain-actions-sub-menu li, .helptain-actions-sub-menu a",function(a){a.stopPropagation()}),a("html,body").on("click",function(){a(".helptain-actionbar-sub-menu, .helptain-actions-sub-menu").addClass("kbs-hidden")}),b.on("click","ul#helptain_status_select li",function(b){b.preventDefault;var c=a(this).attr("status"),d="kbs_ajax_update_ticket_status",e=a(this).parent().attr("nonce"),f=a("input#post_ID").val(),g=a(this);a.ajax({type:"POST",dataType:"json",data:{action:d,status:c,nonce:e,ticket_id:f},url:kbs_vars.ajax_url,success:function(a){"undefined"==typeof a||!a||a.error?console.log("php function returned false"):g.parents("ul.helptain-action-buttons").find("li.ticket-status").html("Status: "+a.status).css("background-color",a.status_color)}}).fail(function(a){window.console&&window.console.log&&console.log(a)})}),b.on("click","ul#helptain_agent_select li",function(b){b.preventDefault;var c=a(this).attr("agent_id"),d="kbs_ajax_update_ticket_agent",e=a(this).parent().attr("nonce"),f=a("input#post_ID").val(),g=a(this);a.ajax({type:"POST",dataType:"json",data:{action:d,agent:c,nonce:e,ticket_id:f},url:kbs_vars.ajax_url,success:function(a){"undefined"==typeof a||!a||a.error?console.log("php function returned false"):(g.parent().find("li").removeClass("active"),g.addClass("active"))}}).fail(function(a){window.console&&window.console.log&&console.log(a)})}),a("html body").on("click","a.helptain-admin-row-actions-toggle",function(b){b.preventDefault(),b.stopPropagation();var c=a(this),d=c.parent().find(".helptain-admin-row-actions");d.toggleClass("kbs-hidden")})});